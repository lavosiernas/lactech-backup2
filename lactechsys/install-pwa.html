<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Instalar LacTech - PWA</title>
    
    <!-- PWA Meta Tags -->
    <meta name="description" content="Instale o LacTech no seu dispositivo">
    <meta name="theme-color" content="#166534">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="LacTech">
    <meta name="mobile-web-app-capable" content="yes">
    
    <!-- PWA Icons -->
    <link rel="icon" href="https://i.postimg.cc/vmrkgDcB/lactech.png" type="image/x-icon">
    <link rel="apple-touch-icon" href="https://i.postimg.cc/vmrkgDcB/lactech.png">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Scripts -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="pwa-manager.js"></script>
    
    <style>
        .gradient-bg {
            background: linear-gradient(135deg, #166534 0%, #22c55e 100%);
        }
        
        .install-animation {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="text-center mb-8">
            <img src="https://i.postimg.cc/vmrkgDcB/lactech.png" alt="LacTech" class="w-24 h-24 mx-auto mb-4 rounded-xl shadow-lg">
            <h1 class="text-3xl font-bold text-gray-800 mb-2">LacTech</h1>
            <p class="text-gray-600">Sistema de Controle Leiteiro</p>
        </div>

        <!-- Install Card -->
        <div class="max-w-md mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
            <div class="gradient-bg p-6 text-white text-center">
                <div class="install-animation mb-4">
                    <svg class="w-16 h-16 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                </div>
                <h2 class="text-xl font-semibold mb-2">Instalar App</h2>
                <p class="text-sm opacity-90">Tenha o LacTech sempre √† m√£o</p>
            </div>

            <div class="p-6">
                <!-- Install Button -->
                <button id="installBtn" class="w-full bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 mb-4 hidden">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                    Instalar LacTech
                </button>

                <!-- iOS Instructions -->
                <div id="iosInstructions" class="bg-blue-50 border border-blue-200 rounded-lg p-4 mb-4 hidden">
                    <h3 class="font-semibold text-blue-800 mb-2">üì± iPhone/iPad</h3>
                    <ol class="text-sm text-blue-700 space-y-1">
                        <li>1. Toque no √≠cone de compartilhar <span class="font-mono">‚éã</span></li>
                        <li>2. Selecione "Adicionar √† Tela Inicial"</li>
                        <li>3. Toque em "Adicionar"</li>
                    </ol>
                </div>

                <!-- Android Instructions -->
                <div id="androidInstructions" class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4 hidden">
                    <h3 class="font-semibold text-green-800 mb-2">ü§ñ Android</h3>
                    <ol class="text-sm text-green-700 space-y-1">
                        <li>1. Toque no menu (3 pontos) no navegador</li>
                        <li>2. Selecione "Adicionar √† tela inicial"</li>
                        <li>3. Confirme a instala√ß√£o</li>
                    </ol>
                </div>

                <!-- Desktop Instructions -->
                <div id="desktopInstructions" class="bg-gray-50 border border-gray-200 rounded-lg p-4 mb-4 hidden">
                    <h3 class="font-semibold text-gray-800 mb-2">üíª Desktop</h3>
                    <ol class="text-sm text-gray-700 space-y-1">
                        <li>1. Clique no √≠cone de instala√ß√£o na barra de endere√ßos</li>
                        <li>2. Ou use Ctrl+Shift+I e clique em "Install"</li>
                        <li>3. Confirme a instala√ß√£o</li>
                    </ol>
                </div>

                <!-- Already Installed -->
                <div id="alreadyInstalled" class="bg-green-50 border border-green-200 rounded-lg p-4 text-center hidden">
                    <svg class="w-8 h-8 text-green-600 mx-auto mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <p class="text-green-800 font-semibold">App j√° instalado!</p>
                    <p class="text-green-600 text-sm">O LacTech j√° est√° dispon√≠vel no seu dispositivo</p>
                </div>

                <!-- Features -->
                <div class="space-y-3">
                    <h3 class="font-semibold text-gray-800 mb-3">‚ú® Benef√≠cios da instala√ß√£o:</h3>
                    <div class="flex items-center text-sm text-gray-600">
                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Acesso r√°pido direto da tela inicial
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Funciona offline
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Notifica√ß√µes push
                    </div>
                    <div class="flex items-center text-sm text-gray-600">
                        <svg class="w-4 h-4 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                        </svg>
                        Experi√™ncia de app nativo
                    </div>
                </div>

                <!-- Back to App -->
                <div class="mt-6 text-center">
                    <a href="/" class="text-green-600 hover:text-green-700 font-medium">
                        ‚Üê Voltar ao app
                    </a>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 text-gray-500 text-sm">
            <p>LacTech - Sistema de Controle Leiteiro</p>
            <p class="mt-1">Vers√£o 1.0.0</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const installBtn = document.getElementById('installBtn');
            const iosInstructions = document.getElementById('iosInstructions');
            const androidInstructions = document.getElementById('androidInstructions');
            const desktopInstructions = document.getElementById('desktopInstructions');
            const alreadyInstalled = document.getElementById('alreadyInstalled');

            // Verifica se j√° est√° instalado
            if (window.matchMedia && window.matchMedia('(display-mode: standalone)').matches) {
                alreadyInstalled.classList.remove('hidden');
                return;
            }

            // Detecta o dispositivo
            const userAgent = navigator.userAgent.toLowerCase();
            const isIOS = /iphone|ipad|ipod/.test(userAgent);
            const isAndroid = /android/.test(userAgent);

            if (isIOS) {
                iosInstructions.classList.remove('hidden');
            } else if (isAndroid) {
                androidInstructions.classList.remove('hidden');
            } else {
                desktopInstructions.classList.remove('hidden');
            }

            // Configura o bot√£o de instala√ß√£o
            if (window.pwaManager && window.pwaManager.deferredPrompt) {
                installBtn.classList.remove('hidden');
                installBtn.addEventListener('click', () => {
                    window.pwaManager.installApp();
                });
            }

            // Listener para quando o prompt de instala√ß√£o estiver dispon√≠vel
            window.addEventListener('beforeinstallprompt', (e) => {
                e.preventDefault();
                window.pwaManager.deferredPrompt = e;
                installBtn.classList.remove('hidden');
            });

            // Listener para quando o app for instalado
            window.addEventListener('appinstalled', () => {
                alreadyInstalled.classList.remove('hidden');
                installBtn.classList.add('hidden');
                iosInstructions.classList.add('hidden');
                androidInstructions.classList.add('hidden');
                desktopInstructions.classList.add('hidden');
            });
        });
    </script>
</body>
</html>
